# Package Management Configuration
# This file defines all tools, their versions, and installation methods

tools:
  go:
    version: "1.24.2"
    description: "Go programming language"
    platforms:
      darwin-arm64:
        url: "https://go.dev/dl/go{version}.darwin-arm64.tar.gz"
        install_path: "$HOME/opt/go"
        extract: true
      darwin-amd64:
        url: "https://go.dev/dl/go{version}.darwin-amd64.tar.gz"
        install_path: "$HOME/opt/go"
        extract: true
      linux-amd64:
        url: "https://go.dev/dl/go{version}.linux-amd64.tar.gz"
        install_path: "$HOME/opt/go"
        extract: true
    check_command: "go version"
    check_version_regex: "go([0-9.]+)"

  neovim:
    version: "v0.11.1"
    description: "Neovim text editor"
    platforms:
      darwin:
        homebrew: "neovim"
      linux-amd64:
        url: "https://github.com/neovim/neovim/releases/download/{version}/nvim-linux-x86_64.tar.gz"
        install_path: "$HOME/.local/bin/nvim-linux64"
        extract: true
        symlink:
          source: "$HOME/.local/bin/nvim-linux64/bin/nvim"
          target: "$HOME/.local/bin/nvim"
    check_command: "nvim --version"
    check_version_regex: "NVIM (v[0-9.]+)"

  starship:
    description: "Cross-shell prompt"
    platforms:
      all:
        install_script: "https://starship.rs/install.sh"
        install_args: ["-b", "$HOME/.local/bin", "--yes"]
      darwin:
        homebrew: "starship"
    check_command: "starship --version"
    check_version_regex: "starship ([0-9.]+)"

  zoxide:
    description: "Directory jumper"
    platforms:
      all:
        install_script: "https://raw.githubusercontent.com/ajeetdsouza/zoxide/main/install.sh"
      darwin:
        homebrew: "zoxide"
    check_command: "zoxide --version"
    check_version_regex: "zoxide ([0-9.]+)"

  lazygit:
    version: "0.44.0"
    description: "Git TUI"
    platforms:
      darwin:
        homebrew: "lazygit"
      linux-amd64:
        url: "https://github.com/jesseduffield/lazygit/releases/download/v{version}/lazygit_{version}_Linux_x86_64.tar.gz"
        install_path: "$HOME/.local/bin"
        extract: true
        extract_files: ["lazygit"]
    check_command: "lazygit --version"
    check_version_regex: "version=([0-9.]+)"

  docker:
    description: "Docker CLI completions"
    platforms:
      all:
        custom_install: true
    files:
      - url: "https://raw.githubusercontent.com/docker/cli/master/contrib/completion/zsh/_docker"
        target: "$HOME/.local/share/zsh/completions/_docker"
      - url: "https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/refs/heads/master/plugins/docker-compose/_docker-compose"
        target: "$HOME/.local/share/zsh/completions/_docker-compose"

  tpm:
    description: "Tmux Plugin Manager"
    platforms:
      all:
        git: "https://github.com/tmux-plugins/tpm"
        install_path: "$HOME/.tmux/plugins/tpm"

  fabric:
    description: "AI-powered CLI tool"
    platforms:
      all:
        go_install: "github.com/danielmiessler/fabric@latest"

  rye:
    description: "Python package manager"
    platforms:
      all:
        install_script: "https://rye.astral.sh/get"

  xh:
    description: "HTTPie clone in Rust"
    platforms:
      darwin:
        homebrew: "xh"
      all:
        cargo_install: "xh"

  vimongo:
    description: "MongoDB TUI"
    platforms:
      all:
        cargo_install: "vimongo"

# Global settings
settings:
  prefer_homebrew: true  # Use homebrew when available on macOS
  verify_checksums: false  # Enable checksum verification (when available)
  backup_existing: true   # Backup existing installations
  parallel_downloads: 3   # Number of parallel downloads